# 索引的设计原则  

## 适合加索引的情况  
###### 1.字段的数值有唯一性限制  
唯一索引，主键索引都可以起到唯一性约束，如果某个字段是唯一的，就可以直接创建唯一索引/主键索引  
例子：学生表中如果以姓名作为主键会有重名的可能性，会降低查询速度，而学号是具有唯一性的字段，所以选择学号作为唯一索引  
``
业务上具有唯一特性的字段，即使是组合字段，也必须建成唯一索引  
唯一索引对insert插入速度的影响可以忽略，而带来的查询速度的提升的明显的  
``
###### 2.频繁作为WHERE查询条件的字段  
![img_39.png](img_39.png)  
可以看到对频繁查询的字段，添加索引对查询速度的提升是巨大的  

###### 3.经常 GROUP BY 和 ORDER BY的列  
``
原因：建造索引，索引本身会进行排序，对ORDER BY来说，执行的适合就不用排序了，索引自己就排好序了;  
对GROUP BY 来说，排好序再分组，也会快很多  
``
![img_40.png](img_40.png)  


---
GROUP BY 和 ORDER　BY 都有的列，选择添加**联合索引**(而不是分别建立两列的索引：这里花费5s),查询速度会飞跃提升    
![img_41.png](img_41.png)  
查询时间从5s缩短为0.257s，可以看到这是飞跃的提升  

**注意！！！**  
如果联合索引是ORDER BY的字段放前面，GROUP BY的字段放后面，则查询的时候就用不到这个联合索引了，而用的是GROUP BY这个字段的索引，  
因为GROUP BY先执行，GROUP BY这个线程先用了这个字段的索引  

所以说如果查询语句既有GROUP BY 又有ORDER BY，则添加联合索引的时候，一定要将GROUP BY的字段写在前面
######  4.UPDATE、DELETE、WHERE条件列    
![img_42.png](img_42.png)    
如果进行更新的时候，更新的字段是非索引字段，提升的效率更明显，这是因为非索引字段更新不需要对索引进行维护  

###### 5.DISTINCT字段需要创建索引  
![img_43.png](img_43.png)  

###### 6.多表JOIN连接操作时，创建索引注意事项  
1.连接表的数量尽量不要超于3张，因为每多一张就增加了一次嵌套的循环  
2.对Where条件创建索引  
3.对用于连接的字段创建索引，并且该字段在多张表中的类型必须一致























## 不适合加索引的情况  