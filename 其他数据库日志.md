
### 日志类型   
除了undo log 和 redo log外还有六个日志   

![img_373.png](img_373.png)     

Mysql8.0官网日志地址：<https://dev.mysql.com/doc/refman/8.0/en/server-logs.html>   


二进制日志、错误日志、通用查询日志、慢查询     
8.0之后还增加了中继日志，数据定义语句日志      

![img_374.png](img_374.png)   

除了二进制日志(binlog)外，其他日志都是文本文件。默认情况下，所有日志创建于MYSQL数据目录中    


### 日志的弊端   

![img_375.png](img_375.png)    




## 慢查询日志(slow query log)   
### 作用   
定位执行慢的SQL

慢查询日志默认是不开启的，如果不是调优需要的话，一般不建议启动该参数，因为开启的话会带来一定的性能影响
###### 4.1 开启慢查询日志参数
1. 查看状态
```mysql
show variables like '%slow_query_log';
```
![img_59.png](img_59.png)
2. 打开慢查询日志
```mysql
set global slow_query_log = on;
```
![img_60.png](img_60.png)
3. 查看日志所在位置
```mysql
show variables  like '%slow_query_log%';
```  

![img_61.png](img_61.png)

4. 设置慢查询的阈值  
   ![img_62.png](img_62.png)  
   上面的方式是临时的，重启mysql后会失效，改配置文件就能永久生效  
   ![img_63.png](img_63.png)

5. 查询慢查询数目
```mysql
SHOW GLOBAL STATUS  LIKE '%Slow_queries%';
```


6. 慢查询的其他决定参数   
   ![img_64.png](img_64.png)


7. 慢查询日志分析工具:mysqldumpslow 定位慢查询的sql
   详情看mysqldumpslow --help


8. 关闭慢查询日志  
   生产当中如果不是为了调优可以关闭慢查询，因为会影响我们的性能

![img_65.png](img_65.png)

![img_66.png](img_66.png)


9. 删除慢查询日志
```mysql
SHOW VARIABLES LIKE 'slow_query_logs%';
```
![img_67.png](img_67.png)


![img_68.png](img_68.png)



## 通用查询日志(general query log)

